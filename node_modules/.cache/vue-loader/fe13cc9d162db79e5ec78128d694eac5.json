{"remainingRequest":"/Users/liyanliang/Desktop/便家/tob-bianjia-clint/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liyanliang/Desktop/便家/tob-bianjia-clint/src/components/repairGoods/computer.vue?vue&type=style&index=0&id=83c3c390&scoped=true&lang=css&","dependencies":[{"path":"/Users/liyanliang/Desktop/便家/tob-bianjia-clint/src/components/repairGoods/computer.vue","mtime":1680709331905},{"path":"/Users/liyanliang/Desktop/便家/tob-bianjia-clint/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liyanliang/Desktop/便家/tob-bianjia-clint/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/liyanliang/Desktop/便家/tob-bianjia-clint/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/liyanliang/Desktop/便家/tob-bianjia-clint/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liyanliang/Desktop/便家/tob-bianjia-clint/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5hZGRUeXBlIHsKICAgIGRpc3BsYXk6IGZsZXg7CiAgICBhbGlnbi1jb250ZW50OiBjZW50ZXI7Cn0KCi5hZGRUeXBlIHNwYW4gewogICAgbGluZS1oZWlnaHQ6IDQwcHg7Cn0K"},{"version":3,"sources":["computer.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsQA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"computer.vue","sourceRoot":"src/components/repairGoods","sourcesContent":["<template>\n    <div class=\"list\">\n        <!-- 面包屑 -->\n        <el-breadcrumb separator=\"/\">\n            <el-breadcrumb-item :to=\"{ path: '/home' }\">首页</el-breadcrumb-item>\n            <el-breadcrumb-item>\n                <a href=\"/home\">维修物品列表</a>\n            </el-breadcrumb-item>\n            <el-breadcrumb-item>设备问题列表</el-breadcrumb-item>\n        </el-breadcrumb>\n        <el-row>\n            <el-col :span=\"10\" class=\"addType\">\n                <span style=\"margin-right: 5px\">录入问题列表: </span>\n                <el-input style=\"width: 200px;margin-right: 10px\" v-model=\"problemName\"></el-input>\n                <el-button type=\"primary\" @click=\"addType\">添加</el-button>\n            </el-col>\n            <el-col :span=\"14\">\n                <el-button type=\"primary\" @click=\"addDialogVisible = true\">录入维修方案</el-button>\n            </el-col>\n        </el-row>\n        <el-row>\n            <span>设备名称：\n                {{\n                    this.$route.query.equipmentType ? this.$route.query.equipmentType : \"\"\n                }}</span>\n        </el-row>\n        <el-row>\n            <el-table :data=\"list\" stripe border style=\"width: 100%;margin:10px 0;\"\n                :header-cell-style=\"{ background: '#eef1f6', color: '#606266' }\">\n                <el-table-column prop=\"problemType\" label=\"问题类型\" width=\"140\"></el-table-column>\n                <el-table-column prop=\"resloveName\" label=\"维修方案\" width=\"150\"></el-table-column>\n                <el-table-column prop=\"desc\" label=\"维修方案描述\"></el-table-column>\n                <el-table-column prop=\"warrantyPeriod\" label=\"保修期\" width=\"140\"></el-table-column>\n                <el-table-column prop=\"price\" label=\"维修价格\" width=\"140\"></el-table-column>\n                <el-table-column label=\"操作\" width=\"200\">\n                    <template slot-scope=\"scope\">\n                        <span @click=\"deleteMethods(scope.row)\"\n                            style=\"color: #2897ff;cursor: pointer; margin-right: 30px;\">删除</span>\n                        <span @click=\"updateMethods(scope.row)\" style=\"color: #2897ff;cursor: pointer;\">编辑</span>\n                    </template>\n                </el-table-column>\n            </el-table>\n        </el-row>\n        <el-dialog title=\"添加维修方案\" :visible.sync=\"addDialogVisible\" @close=\"addCateDialogClose\" width=\"70%\">\n            <el-row>\n                <el-form :model=\"addForm\" :rules=\"addFormRules\" ref=\"addForm\" label-width=\"80px\">\n                    <el-form-item label=\"问题类型\" prop=\"problemType\">\n                        <el-select v-model=\"addForm.problemType\" placeholder=\"请选择对应的问题类型\">\n                            <el-option v-for=\"item in problemTypeList\" :label=\"item.name\" :key=\"item._id\"\n                                :value=\"item.name\"></el-option>\n                        </el-select>\n                    </el-form-item>\n                    <el-form-item label=\"维修方案\" prop=\"resloveName\">\n                        <el-input v-model=\"addForm.resloveName\"></el-input>\n                    </el-form-item>\n                    <el-form-item label=\"维修方案描述\" prop=\"desc\">\n                        <el-input v-model=\"addForm.desc\"></el-input>\n                    </el-form-item>\n                    <el-form-item label=\"保修期\" prop=\"warrantyPeriod\">\n                        <el-input v-model=\"addForm.warrantyPeriod\"></el-input>\n                    </el-form-item>\n                    <el-form-item label=\"维修价格\" prop=\"price\">\n                        <el-input v-model=\"addForm.price\"></el-input>\n                    </el-form-item>\n                </el-form>\n            </el-row>\n            <el-row>\n                <el-col :span=\"10\" style=\"text-align: right;\" v-if=\"showSave\">\n                    <el-button @click=\"save(1)\" type=\"primary\">保存</el-button>\n                </el-col>\n                <el-col :span=\"10\" style=\"text-align: right;\" v-if=\"!showSave\">\n                    <el-button @click=\"saveList\" type=\"primary\">保存</el-button>\n                </el-col>\n                <el-col :span=\"4\" style=\"opacity: 0;\">11</el-col>\n                <el-col :span=\"10\" style=\"text-align: left;\">\n                    <el-button @click=\"cancel\">取消</el-button>\n                </el-col>\n            </el-row>\n        </el-dialog>\n    </div>\n</template>\n\n<script>\nexport default {\n    components: {},\n    data() {\n        return {\n            problemName: \"\",\n            problemTypeList: [],\n            list: [],\n            addDialogVisible: false,\n            addFormRules: {},\n            addForm: {\n                problemType: \"\",\n                resloveName: \"\",\n                desc: \"\",\n                warrantyPeriod: \"\",\n                price: \"\",\n                phoneId: \"\",\n            },\n            copyAddForm: {\n                problemType: \"\",\n                resloveName: \"\",\n                desc: \"\",\n                warrantyPeriod: \"\",\n                price: \"\",\n                phoneId: \"\",\n            },\n            val: \"\",\n        };\n    },\n    computed: {\n        showSave() {\n            if (this.$route.query.id) {\n                return true;\n            } else {\n                return false;\n            }\n        },\n    },\n    watch: {},\n    mounted() {\n        this.getProblemList();\n        this.getProblem();\n    },\n    methods: {\n        /** 添加问题类型 */\n        addType() {\n            if (this.problemName) {\n                let params = {\n                    name: this.problemName,\n                };\n                this.$axios.post(\"problemType/add\", params).then((res) => {\n                    if (res.data.status == 200) {\n                        this.problemName = \"\";\n                        this.$message.success(res.data.message);\n                    } else {\n                        this.$message.error(res.data.message);\n                    }\n                });\n            } else {\n                this.$message.warning(\"输入框不能为空\");\n            }\n        },\n        /** 获取机型解决方案 */\n        getProblem() {\n            this.$axios\n                .post(\n                    \"queryRepairMethods\",\n                    {},\n                    {\n                        params: {\n                            id: this.$route.query.id ? this.$route.query.id : 0,\n                        },\n                    }\n                )\n                .then((res) => {\n                    this.list = res.data;\n                });\n        },\n        /** 获取总问题列表 */\n        getProblemList() {\n            this.$axios.get(\"problemType/query\").then((res) => {\n                if (res.data.status == 200) {\n                    this.problemTypeList = res.data.data;\n                }\n            });\n        },\n        /** 更新当前行数据 */\n        updateMethods(row) {\n            this.addForm = row;\n            this.addDialogVisible = true;\n            this.val = 1;\n        },\n\n        /** 删除该行数据 */\n        deleteMethods(row) {\n            this.$axios\n                .post(\n                    \"deleteMethods\",\n                    {},\n                    {\n                        params: {\n                            id: row._id,\n                        },\n                    }\n                )\n                .then((res) => {\n                    const { data } = res;\n                    if (data.status == 200) {\n                        this.$message.success(\"成功删除一条数据\");\n                        this.getProblem();\n                    } else {\n                        this.$message.error(\"删除失败，请刷新重试\");\n                    }\n                });\n        },\n        /** 关闭弹框 */\n        addCateDialogClose() {\n            // this.$refs.addForm.resetFields();\n            this.addForm = JSON.parse(JSON.stringify(this.copyAddForm));\n            this.addDialogVisible = false;\n            this.val = \"\";\n        },\n        /** 单个保存 */\n        save() {\n            let url = this.val == 1 ? \"addMethods/update\" : \"addMethods/add\";\n            this.addForm.phoneId = this.$route.query.id ? this.$route.query.id : 0;\n            this.$axios.post(url, this.addForm).then((res) => {\n                if (res.data.status == 200) {\n                    this.$message.success(res.data.message);\n                    this.addDialogVisible = false;\n                    this.getProblem();\n                } else {\n                    this.$message.error(res.data.message);\n                }\n            });\n        },\n        /** 列表保存 */\n        saveList() {\n            let list = this.$route.query.list;\n            let arr = [];\n\n            //         this.$confirm(\n            //     `请检查录入信息\\n\n            //     问题类型: ${this.addForm.problemType}`,\n            //     \"提示\",\n            //     {\n            //       confirmButtonText: \"确定\",\n            //       cancelButtonText: \"取消\",\n            //       type: \"warning\",\n            //       dangerousUseHTMLString: true\n            //     }\n            //   ).catch(err => {\n            //     return err;\n            //   });\n\n            if (list.length) {\n                list.forEach((item) => {\n                    let obj = { ...this.addForm, ...item };\n                    arr.push(obj);\n                });\n                this.$axios.post(\"addSomeMethods\", arr).then((res) => {\n                    const { data } = res;\n                    if (data.status == 200) {\n                        this.$message.success('添加成功');\n                        this.addDialogVisible = false;\n                        this.getProblem();\n                    } else {\n                        this.$message.success('添加失败');\n                    }\n                });\n            }\n        },\n        cancel() {\n            this.$refs.addForm.resetFields();\n            this.addDialogVisible = false;\n        },\n    },\n};\n</script>\n<style scoped>\n.addType {\n    display: flex;\n    align-content: center;\n}\n\n.addType span {\n    line-height: 40px;\n}\n</style>\n"]}]}