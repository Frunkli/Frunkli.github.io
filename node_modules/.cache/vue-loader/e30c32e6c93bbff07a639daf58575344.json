{"remainingRequest":"/Users/liyanliang/Desktop/便家/tob-bianjia-clint/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liyanliang/Desktop/便家/tob-bianjia-clint/src/components/goods/List.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/liyanliang/Desktop/便家/tob-bianjia-clint/src/components/goods/List.vue","mtime":1679735545016},{"path":"/Users/liyanliang/Desktop/便家/tob-bianjia-clint/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liyanliang/Desktop/便家/tob-bianjia-clint/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/liyanliang/Desktop/便家/tob-bianjia-clint/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liyanliang/Desktop/便家/tob-bianjia-clint/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcXVlcnlJbmZvOiB7CiAgICAgICAgcXVlcnk6ICIiLAogICAgICAgIHBhZ2VudW06IDEsCiAgICAgICAgcGFnZXNpemU6IDIKICAgICAgfSwKICAgICAgZ29vZHNsaXN0OiBbXSwKICAgICAgdG90YWw6IDAsCiAgICAgIGVkaXREaWFsb2dWaXNpYmxlOiBmYWxzZSwKICAgICAgZWRpdEZvcm06IHt9LAogICAgICBlZGl0Rm9ybVJ1bGVzOiB7CiAgICAgICAgZ29vZHNfbmFtZTogWwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuivt+i+k+WFpeWVhuWTgeWQjeensCIsIHRyaWdnZXI6ICJibHVyIiB9CiAgICAgICAgXSwKICAgICAgICBnb29kc19wcmljZTogWwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuivt+i+k+WFpeWVhuWTgeS7t+agvCIsIHRyaWdnZXI6ICJibHVyIiB9CiAgICAgICAgXSwKICAgICAgICBnb29kc193aWdodDogWwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuivt+i+k+WFpeWVhuWTgemHjemHjyIsIHRyaWdnZXI6ICJibHVyIiB9CiAgICAgICAgXSwKICAgICAgICBnb29kc19udW1iZXI6IFsKICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICLor7fovpPlhaXllYblk4HmlbDph48iLCB0cmlnZ2VyOiAiYmx1ciIgfQogICAgICAgIF0KICAgICAgfQogICAgfTsKICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldEdvb2RzTGlzdCgpOwogIH0sCiAgbWV0aG9kczogewogICAgYXN5bmMgZ2V0R29vZHNMaXN0KCkgewogICAgICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IHRoaXMuJGh0dHAuZ2V0KCJnb29kcyIsIHsKICAgICAgICBwYXJhbXM6IHRoaXMucXVlcnlJbmZvCiAgICAgIH0pOwogICAgICBpZiAoZGF0YS5tZXRhLnN0YXR1cyAhPT0gMjAwKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJG1lc3NhZ2UuZXJyb3IoZGF0YS5tZXRhLm1zZyk7CiAgICAgIH0KICAgICAgdGhpcy5nb29kc2xpc3QgPSBkYXRhLmRhdGEuZ29vZHM7CiAgICAgIHRoaXMudG90YWwgPSBkYXRhLmRhdGEudG90YWw7CiAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuZ29vZHNsaXN0KTsKICAgIH0sCiAgICAvL3BhZ2VzaXplCiAgICBoYW5kbGVTaXplQ2hhbmdlKG5ld1NpemUpIHsKICAgICAgdGhpcy5xdWVyeUluZm8ucGFnZXNpemUgPSBuZXdTaXplOwogICAgICB0aGlzLmdldEdvb2RzTGlzdCgpOwogICAgfSwKICAgIGhhbmRsZUN1cnJlbnRDaGFuZ2UobmV3cGFnZW51bSkgewogICAgICB0aGlzLnF1ZXJ5SW5mby5wYWdlbnVtID0gbmV3cGFnZW51bTsKICAgICAgdGhpcy5nZXRHb29kc0xpc3QoKTsKICAgIH0sCiAgICBhc3luYyByZW1vdmVCeUlkKGlkKSB7CiAgICAgIGNvbnN0IGNvbmZpcm1SZXN1bHQgPSBhd2FpdCB0aGlzLiRjb25maXJtKAogICAgICAgICLmraTmk43kvZzlsIbmsLjkuYXliKDpmaTor6XliIbnsbssIOaYr+WQpue7p+e7rT8iLAogICAgICAgICLmj5DnpLoiLAogICAgICAgIHsKICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAi56Gu5a6aIiwKICAgICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICLlj5bmtogiLAogICAgICAgICAgdHlwZTogIndhcm5pbmciCiAgICAgICAgfQogICAgICApLmNhdGNoKGVyciA9PiB7CiAgICAgICAgcmV0dXJuIGVycjsKICAgICAgfSk7CiAgICAgIGlmIChjb25maXJtUmVzdWx0ICE9PSAiY29uZmlybSIpIHsKICAgICAgICByZXR1cm4gdGhpcy4kbWVzc2FnZS5pbmZvKCLlt7Llj5bmtojliKDpmaQiKTsKICAgICAgfQogICAgICBjb25zdCB7IGRhdGE6IHJlcyB9ID0gYXdhaXQgdGhpcy4kaHR0cC5kZWxldGUoYGdvb2RzLyR7aWR9YCk7CiAgICAgIGlmIChyZXMubWV0YS5zdGF0dXMgIT09IDIwMCkgewogICAgICAgIHJldHVybiB0aGlzLiRtZXNzYWdlLmVycm9yKCLliKDpmaTlpLHotKUiKTsKICAgICAgfQogICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIuWIoOmZpOaIkOWKn++8gSIpOwogICAgICB0aGlzLmdldEdvb2RzTGlzdCgpOwogICAgfSwKICAgIGdvQWRkcGFnZSgpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi9nb29kcy9hZGQiKTsKICAgIH0sCiAgICBhc3luYyBlZGl0QnlJZChpZCkgewogICAgICB0aGlzLmVkaXREaWFsb2dWaXNpYmxlID0gdHJ1ZTsKICAgICAgY29uc3QgeyBkYXRhOiByZXMgfSA9IGF3YWl0IHRoaXMuJGh0dHAuZ2V0KGBnb29kcy8ke2lkfWApOwogICAgICBpZiAocmVzLm1ldGEuc3RhdHVzICE9PSAyMDApIHsKICAgICAgICByZXR1cm4gdGhpcy4kbWVzc2FnZS5lcnJvcigi6I635Y+W5aSx6LSlIik7CiAgICAgIH0KICAgICAgdGhpcy5lZGl0Rm9ybSA9IHJlcy5kYXRhOwogICAgICAvLyBjb25zb2xlLmxvZyhyZXMuZGF0YSk7CiAgICB9LAogICAgZWRpdERpYWxvZ0Nsb3NlZCgpIHsKICAgICAgdGhpcy4kcmVmcy5lZGl0Rm9ybVJlZi5yZXNldEZpZWxkcygpOwogICAgfSwKICAgIGVkaXRMaXN0KCkgewogICAgICB0aGlzLiRyZWZzLmVkaXRGb3JtUmVmLnZhbGlkYXRlKGFzeW5jIHZhbGlkID0+IHsKICAgICAgICAvLyBjb25zb2xlLmxvZyh2YWxpZCk7CiAgICAgICAgaWYgKCF2YWxpZCkgcmV0dXJuOwogICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuZWRpdEZvcm0pOwogICAgICAgIGNvbnN0IHsgZGF0YTogcmVzIH0gPSBhd2FpdCB0aGlzLiRodHRwLnB1dCgKICAgICAgICAgICJnb29kcy8iICsgdGhpcy5lZGl0Rm9ybS5nb29kc19pZCwKICAgICAgICAgIHRoaXMuZWRpdEZvcm0KICAgICAgICApOwogICAgICAgIGlmIChyZXMubWV0YS5zdGF0dXMgIT09IDIwMSkgewogICAgICAgICAgcmV0dXJuIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuaPkOS6pOWksei0pSIpOwogICAgICAgIH0KICAgICAgICB0aGlzLmVkaXREaWFsb2dWaXNpYmxlID0gZmFsc2U7CiAgICAgICAgdGhpcy5nZXRHb29kc0xpc3QoKTsKICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIuaPkOS6pOaIkOWKn++8gSIpOwogICAgICB9KTsKICAgIH0KICB9Cn07Cg=="},{"version":3,"sources":["List.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"List.vue","sourceRoot":"src/components/goods","sourcesContent":["<template>\n  <div>\n    <!-- 面包屑 -->\n    <el-breadcrumb separator=\"/\">\n      <el-breadcrumb-item :to=\"{ path: '/home' }\">首页</el-breadcrumb-item>\n      <el-breadcrumb-item>\n        <a href=\"/home\">商品管理</a>\n      </el-breadcrumb-item>\n      <el-breadcrumb-item>商品列表</el-breadcrumb-item>\n    </el-breadcrumb>\n\n    <!-- 卡片布局 -->\n    <el-card>\n      <el-row :gutter=\"20\">\n        <el-col :span=\"8\">\n          <el-input placeholder=\"请输入内容\" v-model=\"queryInfo.query\" @clear=\"getGoodsList\" clearable>\n            <el-button @click=\"getGoodsList\" slot=\"append\" icon=\"el-icon-search\"></el-button>\n          </el-input>\n        </el-col>\n        <el-col type=\"primary\" :span=\"4\">\n          <el-button type=\"primary\" @click=\"goAddpage\">添加商品</el-button>\n        </el-col>\n      </el-row>\n\n      <!-- 表格 -->\n      <el-table :data=\"goodslist\" border stripe>\n        <el-table-column type=\"index\"></el-table-column>\n        <el-table-column prop=\"goods_name\" label=\"商品名称\"></el-table-column>\n        <el-table-column width=\"95px\" prop=\"goods_price\" label=\"商品价格\"></el-table-column>\n        <el-table-column width=\"80px\" prop=\"goods_weight\" label=\"商品重量\"></el-table-column>\n        <el-table-column width=\"160px\" prop=\"add_time\" label=\"创建时间\">\n          <template v-slot=\"scope\">{{scope.row.add_time | dataForm}}</template>\n        </el-table-column>\n        <el-table-column width=\"130px\" label=\"操作\">\n          <template v-slot=\"scope\">\n            <el-button\n              type=\"primary\"\n              icon=\"el-icon-edit\"\n              size=\"mini\"\n              @click=\"editById(scope.row.goods_id)\"\n            ></el-button>\n            <el-button\n              type=\"danger\"\n              icon=\"el-icon-delete\"\n              size=\"mini\"\n              @click=\"removeById(scope.row.goods_id)\"\n            ></el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n\n      <!-- 分页 -->\n      <el-pagination\n        class=\"pagin\"\n        @size-change=\"handleSizeChange\"\n        @current-change=\"handleCurrentChange\"\n        :current-page=\"queryInfo.pagenum\"\n        :page-sizes=\"[1, 2, 5, 8]\"\n        :page-size=\"queryInfo.pagesize\"\n        layout=\"total, sizes, prev, pager, next, jumper\"\n        :total=\"total\"\n        background\n      ></el-pagination>\n    </el-card>\n\n    <!-- 修改分话框 -->\n    <el-dialog\n      @close=\"editDialogClosed\"\n      title=\"修改商品列表\"\n      :visible.sync=\"editDialogVisible\"\n      width=\"50%\"\n    >\n      <!-- 内容 -->\n      <el-form ref=\"editFormRef\" :rules=\"editFormRules\" :model=\"editForm\" label-width=\"80px\">\n        <el-form-item label=\"商品名称\" prop=\"goods_name\">\n          <el-input v-model=\"editForm.goods_name\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"商品价格\" prop=\"goods_price\">\n          <el-input v-model=\"editForm.goods_price\" type=\"number\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"商品重量\" prop=\"goods_weight\">\n          <el-input v-model=\"editForm.goods_weight\" type=\"number\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"商品数量\" prop=\"goods_number\">\n          <el-input v-model=\"editForm.goods_number\" type=\"number\"></el-input>\n        </el-form-item>\n      </el-form>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"editDialogVisible = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"editList\">确 定</el-button>\n      </span>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      queryInfo: {\n        query: \"\",\n        pagenum: 1,\n        pagesize: 2\n      },\n      goodslist: [],\n      total: 0,\n      editDialogVisible: false,\n      editForm: {},\n      editFormRules: {\n        goods_name: [\n          { required: true, message: \"请输入商品名称\", trigger: \"blur\" }\n        ],\n        goods_price: [\n          { required: true, message: \"请输入商品价格\", trigger: \"blur\" }\n        ],\n        goods_wight: [\n          { required: true, message: \"请输入商品重量\", trigger: \"blur\" }\n        ],\n        goods_number: [\n          { required: true, message: \"请输入商品数量\", trigger: \"blur\" }\n        ]\n      }\n    };\n  },\n  created() {\n    this.getGoodsList();\n  },\n  methods: {\n    async getGoodsList() {\n      const { data } = await this.$http.get(\"goods\", {\n        params: this.queryInfo\n      });\n      if (data.meta.status !== 200) {\n        return this.$message.error(data.meta.msg);\n      }\n      this.goodslist = data.data.goods;\n      this.total = data.data.total;\n      // console.log(this.goodslist);\n    },\n    //pagesize\n    handleSizeChange(newSize) {\n      this.queryInfo.pagesize = newSize;\n      this.getGoodsList();\n    },\n    handleCurrentChange(newpagenum) {\n      this.queryInfo.pagenum = newpagenum;\n      this.getGoodsList();\n    },\n    async removeById(id) {\n      const confirmResult = await this.$confirm(\n        \"此操作将永久删除该分类, 是否继续?\",\n        \"提示\",\n        {\n          confirmButtonText: \"确定\",\n          cancelButtonText: \"取消\",\n          type: \"warning\"\n        }\n      ).catch(err => {\n        return err;\n      });\n      if (confirmResult !== \"confirm\") {\n        return this.$message.info(\"已取消删除\");\n      }\n      const { data: res } = await this.$http.delete(`goods/${id}`);\n      if (res.meta.status !== 200) {\n        return this.$message.error(\"删除失败\");\n      }\n      this.$message.success(\"删除成功！\");\n      this.getGoodsList();\n    },\n    goAddpage() {\n      this.$router.push(\"/goods/add\");\n    },\n    async editById(id) {\n      this.editDialogVisible = true;\n      const { data: res } = await this.$http.get(`goods/${id}`);\n      if (res.meta.status !== 200) {\n        return this.$message.error(\"获取失败\");\n      }\n      this.editForm = res.data;\n      // console.log(res.data);\n    },\n    editDialogClosed() {\n      this.$refs.editFormRef.resetFields();\n    },\n    editList() {\n      this.$refs.editFormRef.validate(async valid => {\n        // console.log(valid);\n        if (!valid) return;\n        // console.log(this.editForm);\n        const { data: res } = await this.$http.put(\n          \"goods/\" + this.editForm.goods_id,\n          this.editForm\n        );\n        if (res.meta.status !== 201) {\n          return this.$message.error(\"提交失败\");\n        }\n        this.editDialogVisible = false;\n        this.getGoodsList();\n        this.$message.success(\"提交成功！\");\n      });\n    }\n  }\n};\n</script>\n\n<style lang=\"less\" scoped>\n</style>"]}]}