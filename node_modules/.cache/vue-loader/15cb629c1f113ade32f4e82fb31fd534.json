{"remainingRequest":"/Users/liyanliang/Desktop/便家/tob-bianjia-clint/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liyanliang/Desktop/便家/tob-bianjia-clint/src/components/order/Order.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/liyanliang/Desktop/便家/tob-bianjia-clint/src/components/order/Order.vue","mtime":1694855373032},{"path":"/Users/liyanliang/Desktop/便家/tob-bianjia-clint/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/liyanliang/Desktop/便家/tob-bianjia-clint/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liyanliang/Desktop/便家/tob-bianjia-clint/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBjaXR5RGF0ZSBmcm9tICIuL2NpdHlkYXRhIjsKZXhwb3J0IGRlZmF1bHQgewogICAgZGF0YSgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBxdWVyeUluZm86IHsKICAgICAgICAgICAgICAgIHF1ZXJ5OiAiIiwKICAgICAgICAgICAgICAgIGN1cnJlbnRQYWdlOiAxLAogICAgICAgICAgICAgICAgcGFnZXNpemU6IDEwCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGN1cnJlbnRQYWdlOiAxLCAvL+m7mOiupOesrOS4gOmhtQogICAgICAgICAgICBwYWdlc2l6ZTogMTAsIC8v5b2T5YmN5pi+56S66aG15pWwCiAgICAgICAgICAgIG9yZGVybGlzdDogW10sCiAgICAgICAgICAgIHRvdGFsOiAwLAogICAgICAgICAgICBhZGRyZXNzVmlzaWJsZTogZmFsc2UsCiAgICAgICAgICAgIGFkZHJlc3NGb3JtOiB7CiAgICAgICAgICAgICAgICBhZGRyZXNzMTogW10sCiAgICAgICAgICAgICAgICBhZGRyZXNzMjogIiIKICAgICAgICAgICAgfSwKICAgICAgICAgICAgYWRkcmVzc0Zvcm1SdWxlczogewogICAgICAgICAgICAgICAgYWRkcmVzczE6IFsKICAgICAgICAgICAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAi6K+36YCJ5oup55yB5biC5Yy6L+WOvyIsIHRyaWdnZXI6ICJibHVyIiB9CiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgYWRkcmVzczI6IFsKICAgICAgICAgICAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAi6K+36L6T5YWl6K+m57uG5Zyw5Z2AIiwgdHJpZ2dlcjogImJsdXIiIH0KICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgY2l0eURhdGUsCiAgICAgICAgICAgIHByb2dyZXNzVmlzaWJsZTogZmFsc2UsCiAgICAgICAgICAgIHByb2dyZXNzSW5mbzogW10KICAgICAgICB9OwogICAgfSwKICAgIGNyZWF0ZWQoKSB7CiAgICAgICAgdGhpcy5nZXRPcmRlckxpc3QoKTsKICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgLyoqIOiOt+WPlum7mOiupOWIl+ihqCAqLwogICAgICAgIGdldE9yZGVyTGlzdCgpIHsKICAgICAgICAgICAgdGhpcy4kYXhpb3MuZ2V0KGAvZ2V0T3JkZXJMaXN0P29wZW5pZD0keycnfWApLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICAgIGNvbnN0IHsgZGF0YSB9ID0gcmVzLmRhdGEKICAgICAgICAgICAgICAgIGlmIChyZXMuZGF0YS5zdGF0dXMgPT0gMjAwKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuZm9yRWFjaChpdGVtID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0ucmVzbG92ZU5hbWUgPSBpdGVtLnJlc2xvdmVOYW1lLnNwbGl0KCc7JykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0ucHJpY2UgPSBpdGVtLnByaWNlLnNwbGl0KCc7JykKICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgbGV0IGFyciA9IGRhdGEuZmlsdGVyKHZhbCA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWwuaXNQYXkKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIHRoaXMub3JkZXJsaXN0ID0gYXJyCiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+ivt+axgumUmeivr++8jOivt+WIt+aWsOmHjeivlScpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgICAgICAvKiog5pu05pS55L+u5aSN54q25oCBICovCiAgICAgICAgcmVzbG92ZU9yZGVyKHJvdywgaWQpIHsKICAgICAgICAgICAgbGV0IHN0ciA9IGlkID09IDEgPyAn57u05L+u5a6M5oiQJyA6ICfnu7Tkv67kuK0nCiAgICAgICAgICAgIHRoaXMuJGNvbmZpcm0oYOatpOaTjeS9nOWwhuS7o+ihqOS/ruaUueeKtuaAgeS4uiR7c3RyfWAsICfmmK/lkKbnu6fnu60/JywgJ+aPkOekuicsIHsKICAgICAgICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywKICAgICAgICAgICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLAogICAgICAgICAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgICAgICAgIH0pLnRoZW4oKCkgPT4gewogICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICfkv67lpI3miJDlip8nCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHJvdy5yZXBhaXJTdGF0dXMgPSBpZCA9PSAxID8gMiA6IDEKICAgICAgICAgICAgICAgIHRoaXMuJGF4aW9zLnBvc3QoJy91cGRhdGVPcmRlckluZm8nLCByb3cpLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpOwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfSkuY2F0Y2goKCkgPT4gewogICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2luZm8nLAogICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICflt7Llj5bmtognCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgICBoYW5kbGVTaXplQ2hhbmdlKG5ld1NpemUpIHsKICAgICAgICAgICAgdGhpcy5wYWdlc2l6ZSA9IG5ld1NpemU7CiAgICAgICAgICAgIHRoaXMuZ2V0T3JkZXJMaXN0KCk7CiAgICAgICAgfSwKICAgICAgICBoYW5kbGVDdXJyZW50Q2hhbmdlKG5ld1BhZ2UpIHsKICAgICAgICAgICAgdGhpcy5jdXJyZW50UGFnZSA9IG5ld1BhZ2U7CiAgICAgICAgICAgIHRoaXMuZ2V0T3JkZXJMaXN0KCk7CiAgICAgICAgfSwKICAgICAgICBnZXRPcmRlckxpc3RCeVBob25lTm8oKSB7CiAgICAgICAgICAgIGlmICh0aGlzLnF1ZXJ5SW5mby5xdWVyeSkgewogICAgICAgICAgICAgICAgdGhpcy4kYXhpb3MuZ2V0KGAvZ2V0T3JkZXJMaXN0QnlQaG9uZU5vP2NhbGxOdW09JHt0aGlzLnF1ZXJ5SW5mby5xdWVyeX1gKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHJlcy5kYXRhLnN0YXR1cyA9PT0gMjAwICYmIHJlcy5kYXRhLmRhdGEubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3JkZXJsaXN0ID0gcmVzLmRhdGEuZGF0YTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9yZGVybGlzdCA9IFtdOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB0aGlzLmdldE9yZGVyTGlzdCgpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQp9Owo="},{"version":3,"sources":["Order.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Order.vue","sourceRoot":"src/components/order","sourcesContent":["<template>\n    <div>\n        <!-- 面包屑 -->\n        <el-breadcrumb separator=\"/\">\n            <el-breadcrumb-item :to=\"{ path: '/home' }\">首页</el-breadcrumb-item>\n            <el-breadcrumb-item>\n                <a href=\"/home\">订单管理</a>\n            </el-breadcrumb-item>\n            <el-breadcrumb-item>订单列表</el-breadcrumb-item>\n        </el-breadcrumb>\n\n        <!-- 卡片布局 -->\n        <el-card>\n            <el-row class=\"queryorder\" :gutter=\"20\">\n                <el-col :span=\"8\">\n                    <el-input placeholder=\"根据手机号查询订单\" v-model=\"queryInfo.query\" clearable>\n                        <el-button @click=\"getOrderListByPhoneNo\" slot=\"append\" icon=\"el-icon-search\"></el-button>\n                    </el-input>\n                </el-col>\n            </el-row>\n\n            <!-- 表格 -->\n            <el-table v-tableFit :data=\"orderlist.slice((currentPage - 1) * pagesize, currentPage * pagesize)\" stripe border\n                style=\"width: 100%\">\n                <el-table-column type=\"index\"></el-table-column>\n                <el-table-column prop=\"orderId\" label=\"订单编号\"></el-table-column>\n                <el-table-column prop=\"allPrice\" label=\"订单价格\" width=\"90\"></el-table-column>\n                <el-table-column prop=\"equipmentType\" label=\"维修设备\" width=\"120\"></el-table-column>\n                <el-table-column prop=\"resloveName\" label=\"维修项目\">\n                    <template v-slot=\"scope\">\n                        <a class=\"tagA\" v-for=\"(item, index) in scope.row.resloveName\" :key=\"index\">{{ item }}</a>\n                    </template>\n                </el-table-column>\n                <el-table-column label=\"是否维修\" width=\"100\">\n                    <template v-slot=\"scope\">\n                        <el-tag type=\"warning\" v-if=\"scope.row.repairStatus === 0\">待维修</el-tag>\n                        <el-tag type=\"warning\" v-if=\"scope.row.repairStatus === 1\">维修中</el-tag>\n                        <el-tag type=\"success\" v-if=\"scope.row.repairStatus === 2\">维修完成</el-tag>\n                        <el-tag type=\"success\" v-if=\"scope.row.refundStatus !== 0\">退款操作</el-tag>\n                    </template>\n                </el-table-column>\n                <el-table-column prop=\"colorName\" label=\"颜色\"></el-table-column>\n                <el-table-column prop=\"remark\" label=\"客户备注\"></el-table-column>\n                <el-table-column prop=\"callNum\" label=\"客户电话\"></el-table-column>\n                <el-table-column prop=\"createTime\" label=\"下单时间\">\n                    <template v-slot=\"scope\">{{ scope.row.createTime | dataForm }}</template>\n                </el-table-column>\n                <el-table-column label=\"操作\" width=\"130px\">\n                    <template v-slot=\"scope\">\n                        <!-- 维修完成 -->\n                        <el-button size=\"mini\" type=\"primary\" v-if=\"scope.row.repairStatus === 1\"\n                            @click=\"resloveOrder(scope.row, 1)\">确认维修完成</el-button>\n                        <!-- 维修中 -->\n                        <el-button size=\"mini\" type=\"primary\" v-if=\"scope.row.repairStatus === 0\"\n                            @click=\"resloveOrder(scope.row, 2)\">确认维修</el-button>\n                    </template>\n                </el-table-column>\n            </el-table>\n            <!-- 页码 -->\n\n            <el-pagination @size-change=\"handleSizeChange\" @current-change=\"handleCurrentChange\" :current-page=\"currentPage\"\n                :page-sizes=\"[5, 10, 15]\" :page-size=\"pagesize\" layout=\"total, sizes, prev, pager, next, jumper\"\n                :total=\"orderlist.length\" background></el-pagination>\n        </el-card>\n\n    </div>\n</template>\n<script>\nimport cityDate from \"./citydata\";\nexport default {\n    data() {\n        return {\n            queryInfo: {\n                query: \"\",\n                currentPage: 1,\n                pagesize: 10\n            },\n            currentPage: 1, //默认第一页\n            pagesize: 10, //当前显示页数\n            orderlist: [],\n            total: 0,\n            addressVisible: false,\n            addressForm: {\n                address1: [],\n                address2: \"\"\n            },\n            addressFormRules: {\n                address1: [\n                    { required: true, message: \"请选择省市区/县\", trigger: \"blur\" }\n                ],\n                address2: [\n                    { required: true, message: \"请输入详细地址\", trigger: \"blur\" }\n                ]\n            },\n            cityDate,\n            progressVisible: false,\n            progressInfo: []\n        };\n    },\n    created() {\n        this.getOrderList();\n    },\n    methods: {\n        /** 获取默认列表 */\n        getOrderList() {\n            this.$axios.get(`/getOrderList?openid=${''}`).then(res => {\n                const { data } = res.data\n                if (res.data.status == 200) {\n                    if (data.length) {\n                        data.forEach(item => {\n                            item.resloveName = item.resloveName.split(';')\n                            item.price = item.price.split(';')\n                        })\n                    }\n                    let arr = data.filter(val => {\n                        return val.isPay\n                    })\n                    this.orderlist = arr\n                } else {\n                    this.$message.error('请求错误，请刷新重试')\n                }\n            })\n        },\n        /** 更改修复状态 */\n        resloveOrder(row, id) {\n            let str = id == 1 ? '维修完成' : '维修中'\n            this.$confirm(`此操作将代表修改状态为${str}`, '是否继续?', '提示', {\n                confirmButtonText: '确定',\n                cancelButtonText: '取消',\n                type: 'warning'\n            }).then(() => {\n                this.$message({\n                    type: 'success',\n                    message: '修复成功'\n                });\n                row.repairStatus = id == 1 ? 2 : 1\n                this.$axios.post('/updateOrderInfo', row).then(res => {\n                    console.log(res);\n                })\n            }).catch(() => {\n                this.$message({\n                    type: 'info',\n                    message: '已取消'\n                });\n            });\n        },\n        handleSizeChange(newSize) {\n            this.pagesize = newSize;\n            this.getOrderList();\n        },\n        handleCurrentChange(newPage) {\n            this.currentPage = newPage;\n            this.getOrderList();\n        },\n        getOrderListByPhoneNo() {\n            if (this.queryInfo.query) {\n                this.$axios.get(`/getOrderListByPhoneNo?callNum=${this.queryInfo.query}`).then(res => {\n                    if (res.data.status === 200 && res.data.data.length) {\n                        this.orderlist = res.data.data;\n                    } else {\n                        this.orderlist = [];\n                    }\n                })\n            } else {\n                this.getOrderList();\n            }\n        }\n    }\n};\n</script>\n\n<style lang=\"less\" scoped>\n.queryorder {\n    margin-bottom: 20px;\n}\n\n.el-pagination {\n    margin-top: 15px;\n}\n\n.tagA {\n    display: block;\n    color: #2a98ff;\n}\n</style>"]}]}